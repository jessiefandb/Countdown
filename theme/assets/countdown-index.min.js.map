{
  "version": 3,
  "sources": ["../../src/scripts/countdown.js"],
  "sourcesContent": ["class FastgrowthCountdown extends HTMLElement {\n  constructor () {\n    super()\n    this.nowTime = 0\n\n    this.$timeWrap = this.querySelector('.as-countdown-time-wrap')\n    this.$days = this.querySelector('.as-countdown-days')\n    this.$hours = this.querySelector('.as-countdown-hours')\n    this.$minutes = this.querySelector('.as-countdown-minutes')\n    this.$seconds = this.querySelector('.as-countdown-seconds')\n    this.$text = this.querySelector('.as-countdown-text')\n    this.$daysLabels = this.querySelectorAll('.as-countdown-days-labels')\n\n    this.$text !== null && (this.text = this.$text.dataset?.text)\n\n    this.eventTime = this.dataset?.eventTime === undefined ? 0 : Number(this.dataset?.eventTime)\n  }\n\n  connectedCallback () {\n    this.init()\n    this.getCurrentTime()\n    this.handleVisibilityChange()\n  }\n\n  init () {\n    if (this.$timeWrap === null || this.eventTime <= 0) {\n      this.classList.remove('inactive')\n    }\n  }\n\n  fetchConfig (type = 'json') {\n    return {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', Accept: `application/${type}` }\n    }\n  }\n\n  handleVisibilityChange () {\n    document.addEventListener('visibilitychange', () => {\n      this.classList.add('inactive')\n      if (document.visibilityState === 'visible') {\n        clearTimeout(this.intervalId)\n        this.init()\n        this.getCurrentTime()\n      }\n    })\n  }\n\n  /**\n   * @description \u8C03\u7528\u63A5\u53E3\u83B7\u53D6\u5F53\u524D\u65F6\u95F4\u6233, \u5355\u4F4D: s\n  */\n  getCurrentTime () {\n    fetch('https://now.fastgrowth.app/', { ...this.fetchConfig() })\n      .then(response => {\n        return response.json()\n      })\n      .then(data => {\n        if (data?.code === '200') {\n          this.nowTime = data.data?.now_time\n          this.handleCountdown(this.nowTime)\n        }\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n  }\n\n  /**\n   * @description \u83B7\u53D6\u5F53\u524D\u65F6\u95F4\u540E, \u57FA\u4E8E\u5F00\u59CB\u65F6\u95F4\u548C\u7ED3\u675F\u65F6\u95F4\u5904\u7406\u903B\u8F91\n   * @nowTime \u5F53\u524D\u65F6\u95F4 / \u5012\u8BA1\u65F6\u8FC7\u7A0B\u4E2D\u7684\u5F53\u524D\u65F6\u95F4\n  */\n  handleCountdown(nowTime) {\n    // \u9ED8\u8BA4\u6D3B\u52A8\u5DF2\u7ED3\u675F \u5012\u8BA1\u65F6\u5168\u90E8\u5C55\u793A\u4E3A 0\n    let diffTime = 0\n    this.intervalId = setInterval(() => {\n      this.classList.remove('inactive')\n\n      if (this.eventTime > 0) {\n        this.$text !== null && (this.$text.innerHTML = String(this.text))\n        if (nowTime <= this.eventTime) {\n          diffTime = this.eventTime - nowTime\n        } else if (nowTime > this.eventTime) {\n          diffTime = this.eventTime - nowTime\n        }\n      }\n\n      if (diffTime >= 0) {\n        this.handleOverTime(diffTime)\n      } else {\n        // \u6D3B\u52A8\u7ED3\u675F\n        clearInterval(this.intervalId)\n        if (this.dataset?.hide === 'true') {\n          this.classList.add('inactive')\n        }\n      }\n      ++nowTime\n    }, 1000)\n  }\n\n  /**\n   * @description \u5C06\u65F6\u95F4\u5DEE\u5904\u7406\u6210\u65F6\u5206\u79D2\n   * @param diffTime \u65F6\u95F4\u5DEE\n  */\n  handleOverTime(diffTime) {\n    const d = Math.floor(diffTime / 60 / 60 / 24)\n    const h = Math.floor(diffTime / 60 / 60 % 24)\n    const m = Math.floor(diffTime / 60 % 60)\n    const s = Math.floor(diffTime % 60)\n\n    this.changeDaysStyle(d)\n\n    this.$days !== null && (this.$days.innerHTML = this.handleSingleDigit(`${d}`))\n    this.$hours !== null && (this.$hours.innerHTML = this.handleSingleDigit(`${h}`))\n    this.$minutes !== null && (this.$minutes.innerHTML = this.handleSingleDigit(`${m}`))\n    this.$seconds !== null && (this.$seconds.innerHTML = this.handleSingleDigit(`${s}`))\n  }\n\n  /**\n   * @description \u5F53 number \u5927\u4E8E2\u4F4D\u6570\u65F6, \u4FEE\u6539 days block \u7684\u6837\u5F0F\n  */\n  changeDaysStyle (number) {\n    if (number > 99) {\n      this.$days?.classList.add('w-auto')\n    } else {\n      this.$days?.classList.remove('w-auto')\n      if (number <= 0) {\n        this.$daysLabels.forEach((item) => {\n          item.classList.add('d-none')\n        })\n      }\n    }\n  }\n\n  /**\n   * @description \u5728\u5C0F\u4E8E10\u7684\u6570\u524D\u9762\u62FC\u63A5\u5B57\u7B26\u4E32 0\n   * @param number\n  */\n  handleSingleDigit (number) {\n    return Number(number) > 9 ? number : `0${number}`\n  }\n}\n\nif (customElements.get('fastgrowth-countdown') === undefined) {\n  customElements.define('fastgrowth-countdown', FastgrowthCountdown)\n}\n"],
  "mappings": ";AAAA,IAAM,sBAAN,cAAkC,YAAY;AAAA,EAC5C,cAAe;AACb,UAAM;AACN,SAAK,UAAU;AAEf,SAAK,YAAY,KAAK,cAAc,yBAAyB;AAC7D,SAAK,QAAQ,KAAK,cAAc,oBAAoB;AACpD,SAAK,SAAS,KAAK,cAAc,qBAAqB;AACtD,SAAK,WAAW,KAAK,cAAc,uBAAuB;AAC1D,SAAK,WAAW,KAAK,cAAc,uBAAuB;AAC1D,SAAK,QAAQ,KAAK,cAAc,oBAAoB;AACpD,SAAK,cAAc,KAAK,iBAAiB,2BAA2B;AAEpE,SAAK,UAAU,SAAS,KAAK,OAAO,KAAK,MAAM,SAAS;AAExD,SAAK,YAAY,KAAK,SAAS,cAAc,SAAY,IAAI,OAAO,KAAK,SAAS,SAAS;AAAA,EAC7F;AAAA,EAEA,oBAAqB;AACnB,SAAK,KAAK;AACV,SAAK,eAAe;AACpB,SAAK,uBAAuB;AAAA,EAC9B;AAAA,EAEA,OAAQ;AACN,QAAI,KAAK,cAAc,QAAQ,KAAK,aAAa,GAAG;AAClD,WAAK,UAAU,OAAO,UAAU;AAAA,IAClC;AAAA,EACF;AAAA,EAEA,YAAa,OAAO,QAAQ;AAC1B,WAAO;AAAA,MACL,QAAQ;AAAA,MACR,SAAS,EAAE,gBAAgB,oBAAoB,QAAQ,eAAe,IAAI,GAAG;AAAA,IAC/E;AAAA,EACF;AAAA,EAEA,yBAA0B;AACxB,aAAS,iBAAiB,oBAAoB,MAAM;AAClD,WAAK,UAAU,IAAI,UAAU;AAC7B,UAAI,SAAS,oBAAoB,WAAW;AAC1C,qBAAa,KAAK,UAAU;AAC5B,aAAK,KAAK;AACV,aAAK,eAAe;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,EACH;AAAA;AAAA;AAAA;AAAA,EAKA,iBAAkB;AAChB,UAAM,+BAA+B,EAAE,GAAG,KAAK,YAAY,EAAE,CAAC,EAC3D,KAAK,cAAY;AAChB,aAAO,SAAS,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,UAAQ;AACZ,UAAI,MAAM,SAAS,OAAO;AACxB,aAAK,UAAU,KAAK,MAAM;AAC1B,aAAK,gBAAgB,KAAK,OAAO;AAAA,MACnC;AAAA,IACF,CAAC,EACA,MAAM,CAAC,UAAU;AAChB,cAAQ,MAAM,KAAK;AAAA,IACrB,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,gBAAgB,SAAS;AAEvB,QAAI,WAAW;AACf,SAAK,aAAa,YAAY,MAAM;AAClC,WAAK,UAAU,OAAO,UAAU;AAEhC,UAAI,KAAK,YAAY,GAAG;AACtB,aAAK,UAAU,SAAS,KAAK,MAAM,YAAY,OAAO,KAAK,IAAI;AAC/D,YAAI,WAAW,KAAK,WAAW;AAC7B,qBAAW,KAAK,YAAY;AAAA,QAC9B,WAAW,UAAU,KAAK,WAAW;AACnC,qBAAW,KAAK,YAAY;AAAA,QAC9B;AAAA,MACF;AAEA,UAAI,YAAY,GAAG;AACjB,aAAK,eAAe,QAAQ;AAAA,MAC9B,OAAO;AAEL,sBAAc,KAAK,UAAU;AAC7B,YAAI,KAAK,SAAS,SAAS,QAAQ;AACjC,eAAK,UAAU,IAAI,UAAU;AAAA,QAC/B;AAAA,MACF;AACA,QAAE;AAAA,IACJ,GAAG,GAAI;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,eAAe,UAAU;AACvB,UAAM,IAAI,KAAK,MAAM,WAAW,KAAK,KAAK,EAAE;AAC5C,UAAM,IAAI,KAAK,MAAM,WAAW,KAAK,KAAK,EAAE;AAC5C,UAAM,IAAI,KAAK,MAAM,WAAW,KAAK,EAAE;AACvC,UAAM,IAAI,KAAK,MAAM,WAAW,EAAE;AAElC,SAAK,gBAAgB,CAAC;AAEtB,SAAK,UAAU,SAAS,KAAK,MAAM,YAAY,KAAK,kBAAkB,GAAG,CAAC,EAAE;AAC5E,SAAK,WAAW,SAAS,KAAK,OAAO,YAAY,KAAK,kBAAkB,GAAG,CAAC,EAAE;AAC9E,SAAK,aAAa,SAAS,KAAK,SAAS,YAAY,KAAK,kBAAkB,GAAG,CAAC,EAAE;AAClF,SAAK,aAAa,SAAS,KAAK,SAAS,YAAY,KAAK,kBAAkB,GAAG,CAAC,EAAE;AAAA,EACpF;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAiB,QAAQ;AACvB,QAAI,SAAS,IAAI;AACf,WAAK,OAAO,UAAU,IAAI,QAAQ;AAAA,IACpC,OAAO;AACL,WAAK,OAAO,UAAU,OAAO,QAAQ;AACrC,UAAI,UAAU,GAAG;AACf,aAAK,YAAY,QAAQ,CAAC,SAAS;AACjC,eAAK,UAAU,IAAI,QAAQ;AAAA,QAC7B,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,kBAAmB,QAAQ;AACzB,WAAO,OAAO,MAAM,IAAI,IAAI,SAAS,IAAI,MAAM;AAAA,EACjD;AACF;AAEA,IAAI,eAAe,IAAI,sBAAsB,MAAM,QAAW;AAC5D,iBAAe,OAAO,wBAAwB,mBAAmB;AACnE;",
  "names": []
}
